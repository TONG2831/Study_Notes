# 网络

### 1.RESTful风格

> 参考:https://blog.csdn.net/qq_21383435/article/details/80032375
>
> https://zhuanlan.zhihu.com/p/30396391?group_id=937244108725641216



### 2.接口的幂等性：接口可重复调用,多次调用的情况下，接口最终得到的结果是一致的。http中`get`查询方法具有天然的幂等性，添加和删除也需要实现幂等性

实现幂等性的方法：

# 全局唯一ID

如果使用全局唯一ID，就是根据业务的操作和内容生成一个全局ID，在执行操作前先根据这个全局唯一ID是否存在，来判断这个操作是否已经执行。如果不存在则把全局ID，存储到存储系统中，比如数据库、redis等。如果存在则表示该方法已经执行。

从工程的角度来说，使用全局ID做幂等可以作为一个业务的基础的微服务存在，在很多的微服务中都会用到这样的服务，在每个微服务中都完成这样的功能，会存在工作量重复。另外打造一个高可靠的幂等服务还需要考虑很多问题，比如一台机器虽然把全局ID先写入了存储，但是在写入之后挂了，这就需要引入全局ID的超时机制。

**使用主键冲突的策略进行防重，在并发量非常高的情况下对数据库性能会有影响**，尤其是应用数据表和主键冲突表在一个库的时候，表现更加明显。其实针对是否会对数据库性能产生影响这个话题，我也和一些专业的DBA同学讨论过，普遍认可的是在[MySQL](http://lib.csdn.net/base/mysql)数据库中采用主键冲突防重，在大并发情况下有可能会造成锁表现象，比较好的办法是**在程序中生产主键进行防重**。

# 去重表

这种方法适用于在业务中有唯一标的插入场景中，比如在以上的支付场景中，如果一个订单只会支付一次，所以订单ID可以作为唯一标识。这时，我们就可以建一张去重表，并且把唯一标识作为唯一索引，在我们实现时，把创建支付单据和写入去去重表，放在一个事务中，如果重复创建，数据库会抛出唯一约束异常，操作就会回滚。

# 插入或更新

这种方法插入并且有唯一索引的情况，比如我们要关联商品品类，其中商品的ID和品类的ID可以构成唯一索引，并且在数据表中也增加了唯一索引。这时就可以使用InsertOrUpdate操作。

# 多版本控制

这种方法适合在更新的场景中，比如我们要更新商品的名字，这时我们就可以在更新的接口中增加一个版本号，来做幂等性。唯一的问题就是**对数据表侵入较大**，**要为每个表设计一个版本号字段，然后写一条判断sql每次进行判断**。

# 状态机控制

这种方法适合在有状态机流转的情况下，比如就会订单的创建和付款，订单的付款肯定是在之前，这时我们可以通过在设计状态字段时，使用int类型，并且通过值类型的大小来做幂等，比如订单的创建为0，付款成功为100。付款失败为99

### 3.http各个版本之间的差别

> 参考?:http://www.cnblogs.com/zhangyfr/p/8662673.html

理解http协议:https://www.cnblogs.com/ranyonsue/p/5984001.html